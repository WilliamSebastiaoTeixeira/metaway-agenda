import{c as $,D as P,p as B,K as L,L as K,x as T,h as Q,n as R,g as U,M as j,N as C,F as z,O as D,P as O,R as M,S as N,T as H,H as W,b as X,o as Y,f as Z,w as g,j as _,i as v,U as F,V as x,W as k,X as I,Y as G,Z as J,_ as ee,$ as te,a0 as oe,a1 as ae}from"./index.451ac893.js";import{r as A,m as ne,u as se}from"./index.6476bc03.js";import{_ as re}from"./plugin-vue_export-helper.21dcd24c.js";var ie=$({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(a,{slots:b,emit:c}){const m=U(),o=P(null);let l=0;const n=[];function p(e){const d=typeof e=="boolean"?e:a.noErrorFocus!==!0,h=++l,S=(t,s)=>{c(`validation${t===!0?"Success":"Error"}`,s)},V=t=>{const s=t.validate();return typeof s.then=="function"?s.then(u=>({valid:u,comp:t}),u=>({valid:!1,comp:t,err:u})):Promise.resolve({valid:s,comp:t})};return(a.greedy===!0?Promise.all(n.map(V)).then(t=>t.filter(s=>s.valid!==!0)):n.reduce((t,s)=>t.then(()=>V(s).then(u=>{if(u.valid===!1)return Promise.reject(u)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return h===l&&S(!0),!0;if(h===l){const{comp:s,err:u}=t[0];if(u!==void 0&&console.error(u),S(!1,s),d===!0){const E=t.find(({comp:q})=>typeof q.focus=="function"&&j(q.$)===!1);E!==void 0&&E.comp.focus()}}return!1})}function r(){l++,n.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function i(e){e!==void 0&&C(e);const d=l+1;p().then(h=>{d===l&&h===!0&&(a.onSubmit!==void 0?c("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function f(e){e!==void 0&&C(e),c("reset"),z(()=>{r(),a.autofocus===!0&&a.noResetFocus!==!0&&y()})}function y(){D(()=>{if(o.value===null)return;const e=o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),d=>d.tabIndex!==-1);e!=null&&e.focus({preventScroll:!0})})}B(O,{bindComponent(e){n.push(e)},unbindComponent(e){const d=n.indexOf(e);d!==-1&&n.splice(d,1)}});let w=!1;return L(()=>{w=!0}),K(()=>{w===!0&&a.autofocus===!0&&y()}),T(()=>{a.autofocus===!0&&y()}),Object.assign(m.proxy,{validate:p,resetValidation:r,submit:i,reset:f,focus:y,getValidationComponents:()=>n}),()=>Q("form",{class:"q-form",ref:o,onSubmit:i,onReset:f},R(b.default))}});const ue=a=>(oe("data-v-286a6ea5"),a=a(),ae(),a),le={class:"bg-white q-pa-lg column",style:{"min-width":"200px","max-width":"400px",width:"100%"}},de=ue(()=>_("div",{class:"flex justify-start"},[_("span",{class:"text-h5 q-mb-md text-primary text-bold"}," Entrar ")],-1)),ce=M({__name:"Login",setup(a){const b=N(),c=H(),m=P(!1),o=W({username:"",password:""}),l=X(()=>({username:{required:A},password:{required:A,minLength:ne(8)}})),n=se(l,o);async function p(){try{const r=await te.autorizacao.login.post(o);c.setAcessToken(r.accessToken),c.setTokenType(r.tokenType),c.setUsuario({id:r.id,username:r.username,tipos:r.tipos})}finally{b.push("/home")}}return(r,i)=>(Y(),Z(ee,{class:"app-background q-pa-md"},{default:g(()=>[_("div",le,[de,v(ie,{class:"q-gutter-y-sm"},{default:g(()=>[v(F,{modelValue:o.username,"onUpdate:modelValue":i[0]||(i[0]=f=>o.username=f),outlined:"",placeholder:"Usuario",dense:"",autocorrect:"on",autocapitalize:"on",autocomplete:"username","bg-color":"white",rules:[()=>!x(n).username.required.$invalid||"O usu\xE1rio \xE9 obrigat\xF3rio."],onKeydown:k(I(p,["prevent"]),["enter"])},null,8,["modelValue","rules","onKeydown"]),v(F,{modelValue:o.password,"onUpdate:modelValue":i[2]||(i[2]=f=>o.password=f),outlined:"",placeholder:"Senha",type:m.value?"text":"password",dense:"",autocorrect:"on",autocapitalize:"on",autocomplete:"current-password","bg-color":"white",rules:[()=>!x(n).password.required.$invalid||"A senha \xE9 obrigat\xF3ria.",()=>!x(n).password.minLength.$invalid||"A senha deve ter no m\xEDnimo 8 caracteres."],onKeydown:k(I(p,["prevent"]),["enter"])},{append:g(()=>[v(G,{name:m.value?"visibility":"visibility_off",class:"cursor-pointer",onClick:i[1]||(i[1]=f=>m.value=!m.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules","onKeydown"]),v(J,{color:"primary",label:"Entrar",unelevated:"",class:"full-width",disable:x(n).$invalid,onClick:p},null,8,["disable"])]),_:1})])]),_:1}))}});var ye=re(ce,[["__scopeId","data-v-286a6ea5"]]);export{ye as default};
