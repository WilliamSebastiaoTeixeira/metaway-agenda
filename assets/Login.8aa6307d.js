import{u as B,r as k,m as P,Q as C,a as Q}from"./index.9a967246.js";import{c as L,l as $,v as K,I as T,Y as z,z as R,h as j,p as D,g as U,J as O,V as I,D as M,Z as N,_ as J,$ as Y,u as Z,E as G,e as H,o as W,i as X,w as b,k as w,j as v,a0 as x,a1 as F,a2 as A,a3 as ee,a4 as te,a5 as oe,a6 as ae}from"./index.43b153ea.js";import{a as ne}from"./focus-manager.7cc6c8df.js";import{Q as se}from"./QPage.097f49ba.js";import{_ as re}from"./plugin-vue_export-helper.21dcd24c.js";import"./use-dark.75c3d207.js";import"./axios.4a359227.js";var ie=L({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(a,{slots:g,emit:c}){const m=U(),o=$(null);let l=0;const n=[];function p(e){const d=typeof e=="boolean"?e:a.noErrorFocus!==!0,y=++l,S=(t,s)=>{c(`validation${t===!0?"Success":"Error"}`,s)},E=t=>{const s=t.validate();return typeof s.then=="function"?s.then(u=>({valid:u,comp:t}),u=>({valid:!1,comp:t,err:u})):Promise.resolve({valid:s,comp:t})};return(a.greedy===!0?Promise.all(n.map(E)).then(t=>t.filter(s=>s.valid!==!0)):n.reduce((t,s)=>t.then(()=>E(s).then(u=>{if(u.valid===!1)return Promise.reject(u)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return y===l&&S(!0),!0;if(y===l){const{comp:s,err:u}=t[0];if(u!==void 0&&console.error(u),S(!1,s),d===!0){const V=t.find(({comp:q})=>typeof q.focus=="function"&&O(q.$)===!1);V!==void 0&&V.comp.focus()}}return!1})}function r(){l++,n.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function i(e){e!==void 0&&I(e);const d=l+1;p().then(y=>{d===l&&y===!0&&(a.onSubmit!==void 0?c("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function f(e){e!==void 0&&I(e),c("reset"),M(()=>{r(),a.autofocus===!0&&a.noResetFocus!==!0&&h()})}function h(){ne(()=>{if(o.value===null)return;const e=o.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||o.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||o.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(o.value.querySelectorAll("[tabindex]"),d=>d.tabIndex!==-1);e!=null&&e.focus({preventScroll:!0})})}K(N,{bindComponent(e){n.push(e)},unbindComponent(e){const d=n.indexOf(e);d!==-1&&n.splice(d,1)}});let _=!1;return T(()=>{_=!0}),z(()=>{_===!0&&a.autofocus===!0&&h()}),R(()=>{a.autofocus===!0&&h()}),Object.assign(m.proxy,{validate:p,resetValidation:r,submit:i,reset:f,focus:h,getValidationComponents:()=>n}),()=>j("form",{class:"q-form",ref:o,onSubmit:i,onReset:f},D(g.default))}});const ue=a=>(oe("data-v-5ec8d470"),a=a(),ae(),a),le={class:"bg-white q-pa-lg column",style:{"min-width":"200px","max-width":"400px",width:"100%"}},de=ue(()=>w("div",{class:"flex justify-start"},[w("span",{class:"text-h5 q-mb-md text-primary text-bold"}," Entrar ")],-1)),ce=J({__name:"Login",setup(a){const g=Y(),c=Z(),m=$(!1),o=G({username:"",password:""}),l=H(()=>({username:{required:k},password:{required:k,minLength:P(8)}})),n=B(l,o);async function p(){try{const r=await Q.autorizacao.login.post(o);c.setAcessToken(r.accessToken),c.setTokenType(r.tokenType),c.setUsuario({id:r.id,username:r.username,tipos:r.tipos})}finally{g.push("/home")}}return(r,i)=>(W(),X(se,{class:"app-background q-pa-md"},{default:b(()=>[w("div",le,[de,v(ie,{class:"q-gutter-y-sm"},{default:b(()=>[v(C,{modelValue:o.username,"onUpdate:modelValue":i[0]||(i[0]=f=>o.username=f),outlined:"",placeholder:"Usuario",dense:"",autocorrect:"on",autocapitalize:"on",autocomplete:"username","bg-color":"white",rules:[()=>!x(n).username.required.$invalid||"O usu\xE1rio \xE9 obrigat\xF3rio."],onKeydown:F(A(p,["prevent"]),["enter"])},null,8,["modelValue","rules","onKeydown"]),v(C,{modelValue:o.password,"onUpdate:modelValue":i[2]||(i[2]=f=>o.password=f),outlined:"",placeholder:"Senha",type:m.value?"text":"password",dense:"",autocorrect:"on",autocapitalize:"on",autocomplete:"current-password","bg-color":"white",rules:[()=>!x(n).password.required.$invalid||"A senha \xE9 obrigat\xF3ria.",()=>!x(n).password.minLength.$invalid||"A senha deve ter no m\xEDnimo 8 caracteres."],onKeydown:F(A(p,["prevent"]),["enter"])},{append:b(()=>[v(ee,{name:m.value?"las la-eye-slash":"las la-eye",class:"cursor-pointer",onClick:i[1]||(i[1]=f=>m.value=!m.value)},null,8,["name"])]),_:1},8,["modelValue","type","rules","onKeydown"]),v(te,{color:"primary",label:"Entrar",unelevated:"",class:"full-width",disable:x(n).$invalid,onClick:p},null,8,["disable"])]),_:1})])]),_:1}))}});var be=re(ce,[["__scopeId","data-v-5ec8d470"]]);export{be as default};
