import{T as g,u as b,E as t,e as i,I as V,x,o as k,i as F,w as j,j as l,k as m,_ as C,N}from"./index.120ea1d1.js";import{Q as h}from"./QPage.1f0dfd90.js";import{a as d}from"./index.ff4ddaca.js";import{_ as B,a as P}from"./Index.14df6c90.js";import"./axios.08e0e472.js";import"./format.959830d0.js";import"./QMenu.ae8b3e0d.js";const R=m("div",{class:"row justify-start q-mb-md"},[m("span",{class:"text-h6 text-bold text-grey-9"},"Meu Cadastro")],-1),U={class:"row justify-end"},I=g({__name:"MeuCadastro",setup(z){const c=b(),f=t(),p=t(),r=t(),u=t(!1),o=i(()=>c.usuario),w=i(()=>{var s,e;return!!((s=f.value)!=null&&s.valid)&&!!((e=p.value)!=null&&e.valid)}),a=V({cpf:"",dataNascimento:"",email:"",id:0,nome:"",password:"",telefone:"",username:""}),v=i(()=>({newPassword:r.value,password:a.password,username:a.username}));async function _(){if(!o.value)return;const{object:s}=await d.usuario.buscar.get(o.value.id);Object.assign(a,s.usuario)}async function y(){try{u.value=!0,await d.usuario.atualizar.put(a),o.value&&c.setUsuario({...o.value,username:a.username}),v.value.newPassword&&await d.usuario.alterarSenha.post(v.value)}finally{u.value=!1,N.create({message:"Usuario atualizado com sucesso",position:"bottom",type:"positive"})}}return x(_),(s,e)=>(k(),F(h,{padding:"",class:"container"},{default:j(()=>[R,l(B,{ref_key:"usuarioFormRef",ref:f,modelValue:a,"onUpdate:modelValue":e[0]||(e[0]=n=>a=n)},null,8,["modelValue"]),l(P,{ref_key:"passwordFormRef",ref:p,modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=n=>r.value=n)},null,8,["modelValue"]),m("div",U,[l(C,{"no-caps":"",unelevated:"",color:"secondary",label:"Salvar",disable:!w.value,loading:u.value,onClick:y},null,8,["disable","loading"])])]),_:1}))}});export{I as default};
